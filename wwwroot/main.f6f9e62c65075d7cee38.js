!function(n){var r={};function __webpack_require__(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,__webpack_require__),e.l=!0,e.exports}__webpack_require__.m=n,__webpack_require__.c=r,__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="/",__webpack_require__(__webpack_require__.s=9)}([function(t,e,n){"use strict";var r,o;n.d(e,"a",function(){return r}),(o=r=r||{})[o.Trace=0]="Trace",o[o.Debug=1]="Debug",o[o.Information=2]="Information",o[o.Warning=3]="Warning",o[o.Error=4]="Error",o[o.Critical=5]="Critical",o[o.None=6]="None"},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"c",function(){return s}),n.d(e,"f",function(){return getDataDetail}),n.d(e,"g",function(){return isArrayBuffer}),n.d(e,"h",function(){return sendMessage}),n.d(e,"e",function(){return createLogger}),n.d(e,"d",function(){return a}),n.d(e,"b",function(){return c});var p=n(0),r=n(4),o=function(n,r,o,i){return new(o=o||Promise)(function(t,e){function fulfilled(t){try{step(i.next(t))}catch(t){e(t)}}function rejected(t){try{step(i.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new o(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(n,r||[])).next())})},g=function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},i=(Arg.isRequired=function(t,e){if(null==t)throw new Error("The '"+e+"' argument is required.")},Arg.isIn=function(t,e,n){if(!(t in e))throw new Error("Unknown "+n+" value: "+t+".")},Arg);function Arg(){}var s=(Object.defineProperty(Platform,"isBrowser",{get:function(){return"object"==typeof window},enumerable:!0,configurable:!0}),Object.defineProperty(Platform,"isWebWorker",{get:function(){return"object"==typeof self&&"importScripts"in self},enumerable:!0,configurable:!0}),Object.defineProperty(Platform,"isNode",{get:function(){return!this.isBrowser&&!this.isWebWorker},enumerable:!0,configurable:!0}),Platform);function Platform(){}function getDataDetail(t,e){var n="";return isArrayBuffer(t)?(n="Binary data of length "+t.byteLength,e&&(n+=". Content: '"+function formatArrayBuffer(t){var e=new Uint8Array(t),n="";return e.forEach(function(t){n+="0x"+(t<16?"0":"")+t.toString(16)+" "}),n.substr(0,n.length-1)}(t)+"'")):"string"==typeof t&&(n="String data of length "+t.length,e&&(n+=". Content: '"+t+"'")),n}function isArrayBuffer(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function sendMessage(s,a,c,u,l,f,h){return o(this,void 0,void 0,function(){var e,n,r,o,i;return g(this,function(t){switch(t.label){case 0:return l?[4,l()]:[3,2];case 1:(r=t.sent())&&((e={}).Authorization="Bearer "+r,n=e),t.label=2;case 2:return s.log(p.a.Trace,"("+a+" transport) sending data. "+getDataDetail(f,h)+"."),o=isArrayBuffer(f)?"arraybuffer":"text",[4,c.post(u,{content:f,headers:n,responseType:o})];case 3:return i=t.sent(),s.log(p.a.Trace,"("+a+" transport) request complete. Response status: "+i.statusCode+"."),[2]}})})}function createLogger(t){return void 0===t?new c(p.a.Information):null===t?r.a.instance:t.log?t:new c(t)}var a=(SubjectSubscription.prototype.dispose=function(){var t=this.subject.observers.indexOf(this.observer);-1<t&&this.subject.observers.splice(t,1),0===this.subject.observers.length&&this.subject.cancelCallback&&this.subject.cancelCallback().catch(function(t){})},SubjectSubscription);function SubjectSubscription(t,e){this.subject=t,this.observer=e}var c=(ConsoleLogger.prototype.log=function(t,e){if(t>=this.minimumLogLevel)switch(t){case p.a.Critical:case p.a.Error:this.outputConsole.error("["+(new Date).toISOString()+"] "+p.a[t]+": "+e);break;case p.a.Warning:this.outputConsole.warn("["+(new Date).toISOString()+"] "+p.a[t]+": "+e);break;case p.a.Information:this.outputConsole.info("["+(new Date).toISOString()+"] "+p.a[t]+": "+e);break;default:this.outputConsole.log("["+(new Date).toISOString()+"] "+p.a[t]+": "+e)}},ConsoleLogger);function ConsoleLogger(t){this.minimumLogLevel=t,this.outputConsole=console}},function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"c",function(){return c}),n.d(e,"a",function(){return l});var r,o,i=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),s=(o=Error,i(HttpError,o),HttpError);function HttpError(t,e){var n=this,r=this.constructor.prototype;return(n=o.call(this,t)||this).statusCode=e,n.__proto__=r,n}var a,c=(a=Error,i(TimeoutError,a),TimeoutError);function TimeoutError(t){void 0===t&&(t="A timeout occurred.");var e=this,n=this.constructor.prototype;return(e=a.call(this,t)||this).__proto__=n,e}var u,l=(u=Error,i(AbortError,u),AbortError);function AbortError(t){void 0===t&&(t="An abort occurred.");var e=this,n=this.constructor.prototype;return(e=u.call(this,t)||this).__proto__=n,e}},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return i});var r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},o=function HttpResponse(t,e,n){this.statusCode=t,this.statusText=e,this.content=n},i=(HttpClient.prototype.get=function(t,e){return this.send(r({},e,{method:"GET",url:t}))},HttpClient.prototype.post=function(t,e){return this.send(r({},e,{method:"POST",url:t}))},HttpClient.prototype.delete=function(t,e){return this.send(r({},e,{method:"DELETE",url:t}))},HttpClient.prototype.getCookieString=function(t){return""},HttpClient);function HttpClient(){}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=(NullLogger.prototype.log=function(t,e){},NullLogger.instance=new NullLogger,NullLogger);function NullLogger(){}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=(TextMessageFormat.write=function(t){return""+t+TextMessageFormat.RecordSeparator},TextMessageFormat.parse=function(t){if(t[t.length-1]!==TextMessageFormat.RecordSeparator)throw new Error("Message is incomplete.");var e=t.split(TextMessageFormat.RecordSeparator);return e.pop(),e},TextMessageFormat.RecordSeparatorCode=30,TextMessageFormat.RecordSeparator=String.fromCharCode(TextMessageFormat.RecordSeparatorCode),TextMessageFormat);function TextMessageFormat(){}},function(t,n,o){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=o(13),i=o(14),s=o(15);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,e){if(kMaxLength()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=Buffer.prototype:(null===t&&(t=new Buffer(e)),t.length=e),t}function Buffer(t,e,n){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(t,e,n);if("number"!=typeof t)return from(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,t)}function from(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function fromArrayBuffer(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);Buffer.TYPED_ARRAY_SUPPORT?(t=e).__proto__=Buffer.prototype:t=fromArrayLike(t,e);return t}(t,e,n,r):"string"==typeof e?function fromString(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!Buffer.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|byteLength(e,n),o=(t=createBuffer(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function fromObject(t,e){if(Buffer.isBuffer(e)){var n=0|checked(e.length);return 0===(t=createBuffer(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function isnan(t){return t!=t}(e.length)?createBuffer(t,0):fromArrayLike(t,e);if("Buffer"===e.type&&s(e.data))return fromArrayLike(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function assertSize(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(t,e){if(assertSize(e),t=createBuffer(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function fromArrayLike(t,e){var n=e.length<0?0:0|checked(e.length);t=createBuffer(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function byteLength(t,e){if(Buffer.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(t).length;default:if(r)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),r=!0}}function swap(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function bidirectionalIndexOf(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=Buffer.from(e,r)),Buffer.isBuffer(e))return 0===e.length?-1:arrayIndexOf(t,e,n,r,o);if("number"==typeof e)return e&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):arrayIndexOf(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,e,n,r,o){var i,s=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a/=s=2,c/=2,n/=2}function read(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var u=-1;for(i=n;i<a;i++)if(read(t,i)===read(e,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===c)return u*s}else-1!==u&&(i-=i-u),u=-1}else for(a<n+c&&(n=a-c),i=n;0<=i;i--){for(var l=!0,f=0;f<c;f++)if(read(t,i+f)!==read(e,f)){l=!1;break}if(l)return i}return-1}function hexWrite(t,e,n,r){n=Number(n)||0;var o=t.length-n;(!r||o<(r=Number(r)))&&(r=o);var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");i/2<r&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function asciiWrite(t,e,n,r){return blitBuffer(function asciiToBytes(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function ucs2Write(t,e,n,r){return blitBuffer(function utf16leToBytes(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function base64Slice(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function utf8Slice(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,s,a,c,u=t[o],l=null,f=239<u?4:223<u?3:191<u?2:1;if(o+f<=n)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(i=t[o+1]))&&127<(c=(31&u)<<6|63&i)&&(l=c);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&2047<(c=(15&u)<<12|(63&i)<<6|63&s)&&(c<55296||57343<c)&&(l=c);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)&&c<1114112&&(l=c)}null===l?(l=65533,f=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=f}return function decodeCodePointsArray(t){var e=t.length;if(e<=h)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=h));return n}(r)}n.Buffer=Buffer,n.SlowBuffer=function SlowBuffer(t){+t!=t&&(t=0);return Buffer.alloc(+t)},n.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),n.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(t){return t.__proto__=Buffer.prototype,t},Buffer.from=function(t,e,n){return from(null,t,e,n)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(t,e,n){return function alloc(t,e,n,r){return assertSize(e),!(e<=0)&&void 0!==n?"string"==typeof r?createBuffer(t,e).fill(n,r):createBuffer(t,e).fill(n):createBuffer(t,e)}(null,t,e,n)},Buffer.allocUnsafe=function(t){return allocUnsafe(null,t)},Buffer.allocUnsafeSlow=function(t){return allocUnsafe(null,t)},Buffer.isBuffer=function isBuffer(t){return!(null==t||!t._isBuffer)},Buffer.compare=function compare(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},Buffer.isEncoding=function isEncoding(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var r=Buffer.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var i=t[n];if(!Buffer.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)swap(this,e,e+1);return this},Buffer.prototype.swap32=function swap32(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)swap(this,e,e+3),swap(this,e+1,e+2);return this},Buffer.prototype.swap64=function swap64(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)swap(this,e,e+7),swap(this,e+1,e+6),swap(this,e+2,e+5),swap(this,e+3,e+4);return this},Buffer.prototype.toString=function toString(){var t=0|this.length;return 0==t?"":0===arguments.length?utf8Slice(this,0,t):function slowToString(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return hexSlice(this,e,n);case"utf8":case"utf-8":return utf8Slice(this,e,n);case"ascii":return asciiSlice(this,e,n);case"latin1":case"binary":return latin1Slice(this,e,n);case"base64":return base64Slice(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},Buffer.prototype.equals=function equals(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function inspect(){var t="",e=n.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function compare(t,e,n,r,o){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=e)return 0;if(o<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(i,s),c=this.slice(r,o),u=t.slice(e,n),l=0;l<a;++l)if(c[l]!==u[l]){i=c[l],s=u[l];break}return i<s?-1:s<i?1:0},Buffer.prototype.includes=function includes(t,e,n){return-1!==this.indexOf(t,e,n)},Buffer.prototype.indexOf=function indexOf(t,e,n){return bidirectionalIndexOf(this,t,e,n,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(t,e,n){return bidirectionalIndexOf(this,t,e,n,!1)},Buffer.prototype.write=function write(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||o<n)&&(n=o),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,s,a,c,u,l,f=!1;;)switch(r){case"hex":return hexWrite(this,t,e,n);case"utf8":case"utf-8":return u=e,l=n,blitBuffer(utf8ToBytes(t,(c=this).length-u),c,u,l);case"ascii":return asciiWrite(this,t,e,n);case"latin1":case"binary":return asciiWrite(this,t,e,n);case"base64":return i=this,s=e,a=n,blitBuffer(base64ToBytes(t),i,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,n);default:if(f)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var h=4096;function asciiSlice(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function latin1Slice(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function hexSlice(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var o="",i=e;i<n;++i)o+=toHex(t[i]);return o}function utf16leSlice(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function checkOffset(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,n,r,o,i){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<e||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function objectWriteUInt16(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function objectWriteUInt32(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function checkIEEE754(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(t,e,n,r,o){return o||checkIEEE754(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function writeDouble(t,e,n,r,o){return o||checkIEEE754(t,0,n,8),i.write(t,e,n,r,52,8),n+8}Buffer.prototype.slice=function slice(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),Buffer.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=Buffer.prototype;else{var o=e-t;n=new Buffer(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},Buffer.prototype.readUIntLE=function readUIntLE(t,e,n){t|=0,e|=0,n||checkOffset(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},Buffer.prototype.readUIntBE=function readUIntBE(t,e,n){t|=0,e|=0,n||checkOffset(t,e,this.length);for(var r=this[t+--e],o=1;0<e&&(o*=256);)r+=this[t+--e]*o;return r},Buffer.prototype.readUInt8=function readUInt8(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function readUInt16LE(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function readIntLE(t,e,n){t|=0,e|=0,n||checkOffset(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*e)),r},Buffer.prototype.readIntBE=function readIntBE(t,e,n){t|=0,e|=0,n||checkOffset(t,e,this.length);for(var r=e,o=1,i=this[t+--r];0<r&&(o*=256);)i+=this[t+--r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function readInt8(t,e){return e||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function readInt16LE(t,e){e||checkOffset(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function readInt16BE(t,e){e||checkOffset(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function readInt32LE(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function readFloatLE(t,e){return e||checkOffset(t,4,this.length),i.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(t,e){return e||checkOffset(t,4,this.length),i.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(t,e){return e||checkOffset(t,8,this.length),i.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(t,e){return e||checkOffset(t,8,this.length),i.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(t,e,n,r){t=+t,e|=0,n|=0,r||checkInt(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},Buffer.prototype.writeUIntBE=function writeUIntBE(t,e,n,r){t=+t,e|=0,n|=0,r||checkInt(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;0<=--o&&(i*=256);)this[e+o]=t/i&255;return e+n},Buffer.prototype.writeUInt8=function writeUInt8(t,e,n){return t=+t,e|=0,n||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(t,e,n){return t=+t,e|=0,n||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(t,e,n){return t=+t,e|=0,n||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(t,e,n){return t=+t,e|=0,n||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(t,e,n){return t=+t,e|=0,n||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function writeIntLE(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);checkInt(this,t,e,n,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},Buffer.prototype.writeIntBE=function writeIntBE(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);checkInt(this,t,e,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[e+i]=255&t;0<=--i&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},Buffer.prototype.writeInt8=function writeInt8(t,e,n){return t=+t,e|=0,n||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function writeInt16LE(t,e,n){return t=+t,e|=0,n||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function writeInt16BE(t,e,n){return t=+t,e|=0,n||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function writeInt32LE(t,e,n){return t=+t,e|=0,n||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function writeInt32BE(t,e,n){return t=+t,e|=0,n||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function writeFloatLE(t,e,n){return writeFloat(this,t,e,!0,n)},Buffer.prototype.writeFloatBE=function writeFloatBE(t,e,n){return writeFloat(this,t,e,!1,n)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(t,e,n){return writeDouble(this,t,e,!0,n)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(t,e,n){return writeDouble(this,t,e,!1,n)},Buffer.prototype.copy=function copy(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),e=e||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;0<=o;--o)t[o+e]=this[o+n];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},Buffer.prototype.fill=function fill(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Buffer.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(i=e;i<n;++i)this[i]=t;else{var s=Buffer.isBuffer(t)?t:utf8ToBytes(new Buffer(t,r).toString()),a=s.length;for(i=0;i<n-e;++i)this[i+e]=s[i%a]}return this};var e=/[^+\/0-9A-Za-z-_]/g;function base64clean(t){if((t=function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(e,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],s=0;s<r;++s){if(55295<(n=t.charCodeAt(s))&&n<57344){if(!o){if(56319<n){-1<(e-=3)&&i.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(e-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(e-=3)&&i.push(239,191,189);if(o=null,n<128){if(--e<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function base64ToBytes(t){return r.toByteArray(base64clean(t))}function blitBuffer(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,o(12))},function(t,h,p){"use strict";(function(n){p.d(h,"a",function(){return s});var r,o,a=p(2),c=p(3),u=p(0),l=p(1),t=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};if("undefined"==typeof XMLHttpRequest){var e=require;o=e("request")}var i,s=(i=c.a,t(NodeHttpClient,i),NodeHttpClient.prototype.send=function(i){var s=this;return new Promise(function(r,o){var t;t=Object(l.g)(i.content)?n.from(i.content):i.content||"";var e=s.request(i.url,{body:t,encoding:"arraybuffer"===i.responseType?null:"utf8",headers:f({"X-Requested-With":"XMLHttpRequest"},i.headers),method:i.method,timeout:i.timeout},function(t,e,n){if(i.abortSignal&&(i.abortSignal.onabort=null),t)return"ETIMEDOUT"===t.code&&(s.logger.log(u.a.Warning,"Timeout from HTTP request."),o(new a.c)),s.logger.log(u.a.Warning,"Error from HTTP request. "+t),void o(t);200<=e.statusCode&&e.statusCode<300?r(new c.b(e.statusCode,e.statusMessage||"",n)):o(new a.b(e.statusMessage||"",e.statusCode||0))});i.abortSignal&&(i.abortSignal.onabort=function(){e.abort(),o(new a.a)})})},NodeHttpClient.prototype.getCookieString=function(t){return this.cookieJar.getCookieString(t)},NodeHttpClient);function NodeHttpClient(t){var e=i.call(this)||this;if(void 0===o)throw new Error("The 'request' module could not be loaded.");return e.logger=t,e.cookieJar=o.jar(),e.request=o.defaults({jar:e.cookieJar}),e}}).call(this,p(6).Buffer)},function(t,e,n){"use strict";(function(u){n.d(e,"a",function(){return t});var l=n(5),f=n(1),t=(HandshakeProtocol.prototype.writeHandshakeRequest=function(t){return l.a.write(JSON.stringify(t))},HandshakeProtocol.prototype.parseHandshakeResponse=function(t){var e,n;if(Object(f.g)(t)||void 0!==u&&t instanceof u){var r=new Uint8Array(t);if(-1===(i=r.indexOf(l.a.RecordSeparatorCode)))throw new Error("Message is incomplete.");var o=i+1;e=String.fromCharCode.apply(null,r.slice(0,o)),n=r.byteLength>o?r.slice(o).buffer:null}else{var i,s=t;if(-1===(i=s.indexOf(l.a.RecordSeparator)))throw new Error("Message is incomplete.");o=i+1,e=s.substring(0,o),n=s.length>o?s.substring(o):null}var a=l.a.parse(e),c=JSON.parse(a[0]);if(c.type)throw new Error("Expected a handshake response from the server.");return[n,c]},HandshakeProtocol);function HandshakeProtocol(){}}).call(this,n(6).Buffer)},function(t,e,n){t.exports=n(10)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(11);var r,o=n(16),i=document.querySelector("#divMessages"),s=document.querySelector("#tbMessage"),a=document.querySelector("#inputZone");document.querySelector(".g-signin2");function renderInput(){a.innerHTML='<label id="lblMessage" for="tbMessage">Message:</label>       <input id="tbMessage" class="input-zone-input" type="text" />       <button id="btnSend">Send</button>       <a href="#" id="singoutbtn">Sign out</a>',i=document.querySelector("#divMessages"),s=document.querySelector("#tbMessage"),document.addEventListener("click",function(t){"btnSend"==t.target.id&&send()}),document.addEventListener("click",function(t){"singoutbtn"==t.target.id&&!function signOut(){gapi.auth2.getAuthInstance().signOut().then(function(){location.reload(),console.log("User signed out.")})}()})}1==r&&renderInput(),window.renderInput=renderInput;var c=(new o.HubConnectionBuilder).withUrl("/hub").build();function send(){console.log("send fired!"),c.send("newMessage",r,s.value).then(function(){return s.value=""})}c.on("messageReceived",function(t,e){var n=document.createElement("div");n.innerHTML='<div class="message-author">'+t+"</div><div>"+e+"</div>",i.appendChild(n),i.scrollTop=i.scrollHeight}),c.start().catch(function(t){return document.write(t)}),a.addEventListener("keyup",function(t){13===t.keyCode&&send()})},function(t,e,n){},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.byteLength=function byteLength(t){var e=getLens(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function toByteArray(t){var e,n,r=getLens(t),o=r[0],i=r[1],s=new l(function _byteLength(t,e,n){return 3*(e+n)/4-n}(0,o,i)),a=0,c=0<i?o-4:o;for(n=0;n<c;n+=4)e=u[t.charCodeAt(n)]<<18|u[t.charCodeAt(n+1)]<<12|u[t.charCodeAt(n+2)]<<6|u[t.charCodeAt(n+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;2===i&&(e=u[t.charCodeAt(n)]<<2|u[t.charCodeAt(n+1)]>>4,s[a++]=255&e);1===i&&(e=u[t.charCodeAt(n)]<<10|u[t.charCodeAt(n+1)]<<4|u[t.charCodeAt(n+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e);return s},e.fromByteArray=function fromByteArray(t){for(var e,n=t.length,r=n%3,o=[],i=0,s=n-r;i<s;i+=16383)o.push(encodeChunk(t,i,s<i+16383?s:i+16383));1==r?(e=t[n-1],o.push(a[e>>2]+a[e<<4&63]+"==")):2==r&&(e=(t[n-2]<<8)+t[n-1],o.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"="));return o.join("")};for(var a=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,i=r.length;o<i;++o)a[o]=r[o],u[r.charCodeAt(o)]=o;function getLens(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function encodeChunk(t,e,n){for(var r,o,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),i.push(a[(o=r)>>18&63]+a[o>>12&63]+a[o>>6&63]+a[63&o]);return i.join("")}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,u=c>>1,l=-7,f=n?o-1:0,h=n?-1:1,p=t[e+f];for(f+=h,i=p&(1<<-l)-1,p>>=-l,l+=a;0<l;i=256*i+t[e+f],f+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;0<l;s=256*s+t[e+f],f+=h,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),i-=u}return(p?-1:1)*s*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var s,a,c,u=8*i-o-1,l=(1<<u)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,g=r?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),2<=(e+=1<=s+f?h/c:h*Math.pow(2,1-f))*c&&(s++,c/=2),l<=s+f?(a=0,s=l):1<=s+f?(a=(e*c-1)*Math.pow(2,o),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,o),s=0));8<=o;t[n+p]=255&a,p+=g,a/=256,o-=8);for(s=s<<o|a,u+=o;0<u;t[n+p]=255&s,p+=g,s/=256,u-=8);t[n+p-g]|=128*d}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";n.r(e);var r,o,a=n(2),s=n(3),i=n(7),b=n(0),c=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),u=(o=s.a,c(XhrHttpClient,o),XhrHttpClient.prototype.send=function(o){var i=this;return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new a.a):o.method?o.url?new Promise(function(t,e){var n=new XMLHttpRequest;n.open(o.method,o.url,!0),n.withCredentials=!0,n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type","text/plain;charset=UTF-8");var r=o.headers;r&&Object.keys(r).forEach(function(t){n.setRequestHeader(t,r[t])}),o.responseType&&(n.responseType=o.responseType),o.abortSignal&&(o.abortSignal.onabort=function(){n.abort(),e(new a.a)}),o.timeout&&(n.timeout=o.timeout),n.onload=function(){o.abortSignal&&(o.abortSignal.onabort=null),200<=n.status&&n.status<300?t(new s.b(n.status,n.statusText,n.response||n.responseText)):e(new a.b(n.statusText,n.status))},n.onerror=function(){i.logger.log(b.a.Warning,"Error from HTTP request. "+n.status+": "+n.statusText+"."),e(new a.b(n.statusText,n.status))},n.ontimeout=function(){i.logger.log(b.a.Warning,"Timeout from HTTP request."),e(new a.c)},n.send(o.content||"")}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},XhrHttpClient);function XhrHttpClient(t){var e=o.call(this)||this;return e.logger=t,e}var l,f,h=(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function __(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),p=(f=s.a,h(DefaultHttpClient,f),DefaultHttpClient.prototype.send=function(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new a.a):t.method?t.url?this.httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},DefaultHttpClient.prototype.getCookieString=function(t){return this.httpClient.getCookieString(t)},DefaultHttpClient);function DefaultHttpClient(t){var e=f.call(this)||this;return"undefined"!=typeof XMLHttpRequest?e.httpClient=new u(t):e.httpClient=new i.a(t),e}var g,d,y=n(8);(d=g=g||{})[d.Invocation=1]="Invocation",d[d.StreamItem=2]="StreamItem",d[d.Completion=3]="Completion",d[d.StreamInvocation=4]="StreamInvocation",d[d.CancelInvocation=5]="CancelInvocation",d[d.Ping=6]="Ping",d[d.Close=7]="Close";var v=n(1),w=(Subject.prototype.next=function(t){for(var e=0,n=this.observers;e<n.length;e++)n[e].next(t)},Subject.prototype.error=function(t){for(var e=0,n=this.observers;e<n.length;e++){var r=n[e];r.error&&r.error(t)}},Subject.prototype.complete=function(){for(var t=0,e=this.observers;t<e.length;t++){var n=e[t];n.complete&&n.complete()}},Subject.prototype.subscribe=function(t){return this.observers.push(t),new v.d(this,t)},Subject);function Subject(){this.observers=[]}var m,S,C=function(n,r,o,i){return new(o=o||Promise)(function(t,e){function fulfilled(t){try{step(i.next(t))}catch(t){e(t)}}function rejected(t){try{step(i.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new o(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(n,r||[])).next())})},E=function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};(S=m=m||{}).Disconnected="Disconnected",S.Connecting="Connecting",S.Connected="Connected",S.Disconnecting="Disconnecting",S.Reconnecting="Reconnecting";var k=(HubConnection.create=function(t,e,n,r){return new HubConnection(t,e,n,r)},Object.defineProperty(HubConnection.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),Object.defineProperty(HubConnection.prototype,"connectionId",{get:function(){return this.connection&&this.connection.connectionId||null},enumerable:!0,configurable:!0}),Object.defineProperty(HubConnection.prototype,"baseUrl",{get:function(){return this.connection.baseUrl||""},set:function(t){if(this.connectionState!==m.Disconnected&&this.connectionState!==m.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t},enumerable:!0,configurable:!0}),HubConnection.prototype.start=function(){return this.startPromise=this.startWithStateTransitions(),this.startPromise},HubConnection.prototype.startWithStateTransitions=function(){return C(this,void 0,void 0,function(){var e;return E(this,function(t){switch(t.label){case 0:if(this.connectionState!==m.Disconnected)return[2,Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."))];this.connectionState=m.Connecting,this.logger.log(b.a.Debug,"Starting HubConnection."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startInternal()];case 2:return t.sent(),this.connectionState=m.Connected,this.connectionStarted=!0,this.logger.log(b.a.Debug,"HubConnection connected successfully."),[3,4];case 3:return e=t.sent(),this.connectionState=m.Disconnected,this.logger.log(b.a.Debug,"HubConnection failed to start successfully because of error '"+e+"'."),[2,Promise.reject(e)];case 4:return[2]}})})},HubConnection.prototype.startInternal=function(){return C(this,void 0,void 0,function(){var e,n,r,o=this;return E(this,function(t){switch(t.label){case 0:return this.stopDuringStartError=void 0,this.receivedHandshakeResponse=!1,e=new Promise(function(t,e){o.handshakeResolver=t,o.handshakeRejecter=e}),[4,this.connection.start(this.protocol.transferFormat)];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),n={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(b.a.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(n))];case 3:return t.sent(),this.logger.log(b.a.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,e];case 4:if(t.sent(),this.stopDuringStartError)throw this.stopDuringStartError;return[3,7];case 5:return r=t.sent(),this.logger.log(b.a.Debug,"Hub handshake failed with error '"+r+"' during start(). Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),[4,this.connection.stop(r)];case 6:throw t.sent(),r;case 7:return[2]}})})},HubConnection.prototype.stop=function(){return C(this,void 0,void 0,function(){var e;return E(this,function(t){switch(t.label){case 0:return e=this.startPromise,this.stopPromise=this.stopInternal(),[4,this.stopPromise];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,e];case 3:case 4:return t.sent(),[3,5];case 5:return[2]}})})},HubConnection.prototype.stopInternal=function(t){return this.connectionState===m.Disconnected?(this.logger.log(b.a.Debug,"Call to HubConnection.stop("+t+") ignored because it is already in the disconnected state."),Promise.resolve()):this.connectionState===m.Disconnecting?(this.logger.log(b.a.Debug,"Call to HttpConnection.stop("+t+") ignored because the connection is already in the disconnecting state."),this.stopPromise):(this.connectionState=m.Disconnecting,this.logger.log(b.a.Debug,"Stopping HubConnection."),this.reconnectDelayHandle?(this.logger.log(b.a.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this.reconnectDelayHandle),this.reconnectDelayHandle=void 0,this.completeClose(),Promise.resolve()):(this.cleanupTimeout(),this.cleanupPingTimer(),this.stopDuringStartError=t||new Error("The connection was stopped before the hub handshake could complete."),this.connection.stop(t)))},HubConnection.prototype.stream=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o,i=this.replaceStreamingParams(n),s=i[0],a=i[1],c=this.createStreamInvocation(t,n,a),u=new w;return u.cancelCallback=function(){var t=e.createCancelInvocation(c.invocationId);return delete e.callbacks[c.invocationId],o.then(function(){return e.sendWithProtocol(t)})},this.callbacks[c.invocationId]=function(t,e){e?u.error(e):t&&(t.type===g.Completion?t.error?u.error(new Error(t.error)):u.complete():u.next(t.item))},o=this.sendWithProtocol(c).catch(function(t){u.error(t),delete e.callbacks[c.invocationId]}),this.launchStreams(s,o),u},HubConnection.prototype.sendMessage=function(t){return this.resetKeepAliveInterval(),this.connection.send(t)},HubConnection.prototype.sendWithProtocol=function(t){return this.sendMessage(this.protocol.writeMessage(t))},HubConnection.prototype.send=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.replaceStreamingParams(e),o=r[0],i=r[1],s=this.sendWithProtocol(this.createInvocation(t,e,!0,i));return this.launchStreams(o,s),s},HubConnection.prototype.invoke=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.replaceStreamingParams(n),i=o[0],s=o[1],a=this.createInvocation(t,n,!1,s);return new Promise(function(n,r){e.callbacks[a.invocationId]=function(t,e){e?r(e):t&&(t.type===g.Completion?t.error?r(new Error(t.error)):n(t.result):r(new Error("Unexpected message type: "+t.type)))};var t=e.sendWithProtocol(a).catch(function(t){r(t),delete e.callbacks[a.invocationId]});e.launchStreams(i,t)})},HubConnection.prototype.on=function(t,e){t&&e&&(t=t.toLowerCase(),this.methods[t]||(this.methods[t]=[]),-1===this.methods[t].indexOf(e)&&this.methods[t].push(e))},HubConnection.prototype.off=function(t,e){if(t){t=t.toLowerCase();var n=this.methods[t];if(n)if(e){var r=n.indexOf(e);-1!==r&&(n.splice(r,1),0===n.length&&delete this.methods[t])}else delete this.methods[t]}},HubConnection.prototype.onclose=function(t){t&&this.closedCallbacks.push(t)},HubConnection.prototype.onreconnecting=function(t){t&&this.reconnectingCallbacks.push(t)},HubConnection.prototype.onreconnected=function(t){t&&this.reconnectedCallbacks.push(t)},HubConnection.prototype.processIncomingData=function(t){if(this.cleanupTimeout(),this.receivedHandshakeResponse||(t=this.processHandshakeResponse(t),this.receivedHandshakeResponse=!0),t)for(var e=0,n=this.protocol.parseMessages(t,this.logger);e<n.length;e++){var r=n[e];switch(r.type){case g.Invocation:this.invokeClientMethod(r);break;case g.StreamItem:case g.Completion:var o=this.callbacks[r.invocationId];o&&(r.type===g.Completion&&delete this.callbacks[r.invocationId],o(r));break;case g.Ping:break;case g.Close:this.logger.log(b.a.Information,"Close message received from server.");var i=r.error?new Error("Server returned an error on close: "+r.error):void 0;!0===r.allowReconnect?this.connection.stop(i):this.stopPromise=this.stopInternal(i);break;default:this.logger.log(b.a.Warning,"Invalid message type: "+r.type+".")}}this.resetTimeoutPeriod()},HubConnection.prototype.processHandshakeResponse=function(t){var e,n,r;try{r=(e=this.handshakeProtocol.parseHandshakeResponse(t))[0],n=e[1]}catch(t){var o="Error parsing handshake response: "+t;this.logger.log(b.a.Error,o);var i=new Error(o);throw this.handshakeRejecter(i),i}if(n.error)throw o="Server returned handshake error: "+n.error,this.logger.log(b.a.Error,o),i=new Error(o),this.handshakeRejecter(i),i;return this.logger.log(b.a.Debug,"Server handshake complete."),this.handshakeResolver(),r},HubConnection.prototype.resetKeepAliveInterval=function(){var t=this;this.cleanupPingTimer(),this.pingServerHandle=setTimeout(function(){return C(t,void 0,void 0,function(){return E(this,function(t){switch(t.label){case 0:if(this.connectionState!==m.Connected)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return t.sent(),[3,4];case 3:return t.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}})})},this.keepAliveIntervalInMilliseconds)},HubConnection.prototype.resetTimeoutPeriod=function(){var t=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout(function(){return t.serverTimeout()},this.serverTimeoutInMilliseconds))},HubConnection.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},HubConnection.prototype.invokeClientMethod=function(e){var n=this,t=this.methods[e.target.toLowerCase()];if(t){try{t.forEach(function(t){return t.apply(n,e.arguments)})}catch(t){this.logger.log(b.a.Error,"A callback for the method "+e.target.toLowerCase()+" threw error '"+t+"'.")}if(e.invocationId){var r="Server requested a response, which is not supported in this version of the client.";this.logger.log(b.a.Error,r),this.stopPromise=this.stopInternal(new Error(r))}}else this.logger.log(b.a.Warning,"No client method with the name '"+e.target+"' found.")},HubConnection.prototype.connectionClosed=function(t){this.logger.log(b.a.Debug,"HubConnection.connectionClosed("+t+") called while in state "+this.connectionState+"."),this.stopDuringStartError=this.stopDuringStartError||t||new Error("The underlying connection was closed before the hub handshake could complete."),this.handshakeResolver&&this.handshakeResolver(),this.cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this.cleanupTimeout(),this.cleanupPingTimer(),this.connectionState===m.Disconnecting?this.completeClose(t):this.connectionState===m.Connected&&this.reconnectPolicy?this.reconnect(t):this.connectionState===m.Connected&&this.completeClose(t)},HubConnection.prototype.completeClose=function(e){var n=this;if(this.connectionStarted){this.connectionState=m.Disconnected,this.connectionStarted=!1;try{this.closedCallbacks.forEach(function(t){return t.apply(n,[e])})}catch(t){this.logger.log(b.a.Error,"An onclose callback called with error '"+e+"' threw error '"+t+"'.")}}},HubConnection.prototype.reconnect=function(a){return C(this,void 0,void 0,function(){var e,n,r,o,i,s=this;return E(this,function(t){switch(t.label){case 0:if(e=Date.now(),r=void(n=0)!==a?a:new Error("Attempting to reconnect due to a unknown error."),null===(o=this.getNextRetryDelay(n++,0,r)))return this.logger.log(b.a.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this.completeClose(a),[2];if(this.connectionState=m.Reconnecting,a?this.logger.log(b.a.Information,"Connection reconnecting because of error '"+a+"'."):this.logger.log(b.a.Information,"Connection reconnecting."),this.onreconnecting){try{this.reconnectingCallbacks.forEach(function(t){return t.apply(s,[a])})}catch(t){this.logger.log(b.a.Error,"An onreconnecting callback called with error '"+a+"' threw error '"+t+"'.")}if(this.connectionState!==m.Reconnecting)return this.logger.log(b.a.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting."),[2]}t.label=1;case 1:return null===o?[3,7]:(this.logger.log(b.a.Information,"Reconnect attempt number "+n+" will start in "+o+" ms."),[4,new Promise(function(t){s.reconnectDelayHandle=setTimeout(t,o)})]);case 2:if(t.sent(),this.reconnectDelayHandle=void 0,this.connectionState!==m.Reconnecting)return this.logger.log(b.a.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting."),[2];t.label=3;case 3:return t.trys.push([3,5,,6]),[4,this.startInternal()];case 4:if(t.sent(),this.connectionState=m.Connected,this.logger.log(b.a.Information,"HubConnection reconnected successfully."),this.onreconnected)try{this.reconnectedCallbacks.forEach(function(t){return t.apply(s,[s.connection.connectionId])})}catch(t){this.logger.log(b.a.Error,"An onreconnected callback called with connectionId '"+this.connection.connectionId+"; threw error '"+t+"'.")}return[2];case 5:return i=t.sent(),this.logger.log(b.a.Information,"Reconnect attempt failed because of error '"+i+"'."),this.connectionState!==m.Reconnecting?(this.logger.log(b.a.Debug,"Connection left the reconnecting state during reconnect attempt. Done reconnecting."),[2]):(r=i instanceof Error?i:new Error(i.toString()),o=this.getNextRetryDelay(n++,Date.now()-e,r),[3,6]);case 6:return[3,1];case 7:return this.logger.log(b.a.Information,"Reconnect retries have been exhausted after "+(Date.now()-e)+" ms and "+n+" failed attempts. Connection disconnecting."),this.completeClose(),[2]}})})},HubConnection.prototype.getNextRetryDelay=function(e,n,t){try{return this.reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:n,previousRetryCount:e,retryReason:t})}catch(t){return this.logger.log(b.a.Error,"IRetryPolicy.nextRetryDelayInMilliseconds("+e+", "+n+") threw error '"+t+"'."),null}},HubConnection.prototype.cancelCallbacksWithError=function(e){var n=this.callbacks;this.callbacks={},Object.keys(n).forEach(function(t){(0,n[t])(null,e)})},HubConnection.prototype.cleanupPingTimer=function(){this.pingServerHandle&&clearTimeout(this.pingServerHandle)},HubConnection.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},HubConnection.prototype.createInvocation=function(t,e,n,r){if(n)return{arguments:e,streamIds:r,target:t,type:g.Invocation};var o=this.invocationId;return this.invocationId++,{arguments:e,invocationId:o.toString(),streamIds:r,target:t,type:g.Invocation}},HubConnection.prototype.launchStreams=function(t,r){var o=this;if(0!==t.length){r=r||Promise.resolve();var e=function(n){t[n].subscribe({complete:function(){r=r.then(function(){return o.sendWithProtocol(o.createCompletionMessage(n))})},error:function(t){var e;e=t instanceof Error?t.message:t&&t.toString?t.toString():"Unknown error",r=r.then(function(){return o.sendWithProtocol(o.createCompletionMessage(n,e))})},next:function(t){r=r.then(function(){return o.sendWithProtocol(o.createStreamItemMessage(n,t))})}})};for(var n in t)e(n)}},HubConnection.prototype.replaceStreamingParams=function(t){for(var e=[],n=[],r=0;r<t.length;r++){var o=t[r];if(this.isObservable(o)){var i=this.invocationId;this.invocationId++,e[i]=o,n.push(i.toString()),t.splice(r,1)}}return[e,n]},HubConnection.prototype.isObservable=function(t){return t&&t.subscribe&&"function"==typeof t.subscribe},HubConnection.prototype.createStreamInvocation=function(t,e,n){var r=this.invocationId;return this.invocationId++,{arguments:e,invocationId:r.toString(),streamIds:n,target:t,type:g.StreamInvocation}},HubConnection.prototype.createCancelInvocation=function(t){return{invocationId:t,type:g.CancelInvocation}},HubConnection.prototype.createStreamItemMessage=function(t,e){return{invocationId:t,item:e,type:g.StreamItem}},HubConnection.prototype.createCompletionMessage=function(t,e,n){return e?{error:e,invocationId:t,type:g.Completion}:{invocationId:t,result:n,type:g.Completion}},HubConnection);function HubConnection(t,e,n,r){var o=this;v.a.isRequired(t,"connection"),v.a.isRequired(e,"logger"),v.a.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this.logger=e,this.protocol=n,this.connection=t,this.reconnectPolicy=r,this.handshakeProtocol=new y.a,this.connection.onreceive=function(t){return o.processIncomingData(t)},this.connection.onclose=function(t){return o.connectionClosed(t)},this.callbacks={},this.methods={},this.closedCallbacks=[],this.reconnectingCallbacks=[],this.reconnectedCallbacks=[],this.invocationId=0,this.receivedHandshakeResponse=!1,this.connectionState=m.Disconnected,this.connectionStarted=!1,this.cachedPingMessage=this.protocol.writeMessage({type:g.Ping})}var T,P,B,I,_=[0,2e3,1e4,3e4,null],H=(DefaultReconnectPolicy.prototype.nextRetryDelayInMilliseconds=function(t){return this.retryDelays[t.previousRetryCount]},DefaultReconnectPolicy);function DefaultReconnectPolicy(t){this.retryDelays=void 0!==t?t.concat([null]):_}(P=T=T||{})[P.None=0]="None",P[P.WebSockets=1]="WebSockets",P[P.ServerSentEvents=2]="ServerSentEvents",P[P.LongPolling=4]="LongPolling",(I=B=B||{})[I.Text=1]="Text",I[I.Binary=2]="Binary";var R=(AbortController.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(AbortController.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(AbortController.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),AbortController);function AbortController(){this.isAborted=!1,this.onabort=null}var A=function(n,r,o,i){return new(o=o||Promise)(function(t,e){function fulfilled(t){try{step(i.next(t))}catch(t){e(t)}}function rejected(t){try{step(i.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new o(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(n,r||[])).next())})},D=function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},O=(Object.defineProperty(LongPollingTransport.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),LongPollingTransport.prototype.connect=function(i,s){return A(this,void 0,void 0,function(){var e,n,r,o;return D(this,function(t){switch(t.label){case 0:if(v.a.isRequired(i,"url"),v.a.isRequired(s,"transferFormat"),v.a.isIn(s,B,"transferFormat"),this.url=i,this.logger.log(b.a.Trace,"(LongPolling transport) Connecting."),s===B.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return e={abortSignal:this.pollAbort.signal,headers:{},timeout:1e5},s===B.Binary&&(e.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return n=t.sent(),this.updateHeaderToken(e,n),r=i+"&_="+Date.now(),this.logger.log(b.a.Trace,"(LongPolling transport) polling: "+r+"."),[4,this.httpClient.get(r,e)];case 2:return 200!==(o=t.sent()).statusCode?(this.logger.log(b.a.Error,"(LongPolling transport) Unexpected response code: "+o.statusCode+"."),this.closeError=new a.b(o.statusText||"",o.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,e),[2]}})})},LongPollingTransport.prototype.getAccessToken=function(){return A(this,void 0,void 0,function(){return D(this,function(t){switch(t.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,t.sent()];case 2:return[2,null]}})})},LongPollingTransport.prototype.updateHeaderToken=function(t,e){t.headers||(t.headers={}),e?t.headers.Authorization="Bearer "+e:t.headers.Authorization&&delete t.headers.Authorization},LongPollingTransport.prototype.poll=function(i,s){return A(this,void 0,void 0,function(){var e,n,r,o;return D(this,function(t){switch(t.label){case 0:t.trys.push([0,,8,9]),t.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:e=t.sent(),this.updateHeaderToken(s,e),t.label=3;case 3:return t.trys.push([3,5,,6]),n=i+"&_="+Date.now(),this.logger.log(b.a.Trace,"(LongPolling transport) polling: "+n+"."),[4,this.httpClient.get(n,s)];case 4:return 204===(r=t.sent()).statusCode?(this.logger.log(b.a.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1):200!==r.statusCode?(this.logger.log(b.a.Error,"(LongPolling transport) Unexpected response code: "+r.statusCode+"."),this.closeError=new a.b(r.statusText||"",r.statusCode),this.running=!1):r.content?(this.logger.log(b.a.Trace,"(LongPolling transport) data received. "+Object(v.f)(r.content,this.logMessageContent)+"."),this.onreceive&&this.onreceive(r.content)):this.logger.log(b.a.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,6];case 5:return o=t.sent(),this.running?o instanceof a.c?this.logger.log(b.a.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=o,this.running=!1):this.logger.log(b.a.Trace,"(LongPolling transport) Poll errored after shutdown: "+o.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(b.a.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}})})},LongPollingTransport.prototype.send=function(e){return A(this,void 0,void 0,function(){return D(this,function(t){return this.running?[2,Object(v.h)(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},LongPollingTransport.prototype.stop=function(){return A(this,void 0,void 0,function(){var e,n;return D(this,function(t){switch(t.label){case 0:this.logger.log(b.a.Trace,"(LongPolling transport) Stopping polling."),this.running=!1,this.pollAbort.abort(),t.label=1;case 1:return t.trys.push([1,,5,6]),[4,this.receiving];case 2:return t.sent(),this.logger.log(b.a.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),e={headers:{}},[4,this.getAccessToken()];case 3:return n=t.sent(),this.updateHeaderToken(e,n),[4,this.httpClient.delete(this.url,e)];case 4:return t.sent(),this.logger.log(b.a.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(b.a.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}})})},LongPollingTransport.prototype.raiseOnClose=function(){if(this.onclose){var t="(LongPolling transport) Firing onclose event.";this.closeError&&(t+=" Error: "+this.closeError),this.logger.log(b.a.Trace,t),this.onclose(this.closeError)}},LongPollingTransport);function LongPollingTransport(t,e,n,r){this.httpClient=t,this.accessTokenFactory=e,this.logger=n,this.pollAbort=new R,this.logMessageContent=r,this.running=!1,this.onreceive=null,this.onclose=null}var L=function(n,r,o,i){return new(o=o||Promise)(function(t,e){function fulfilled(t){try{step(i.next(t))}catch(t){e(t)}}function rejected(t){try{step(i.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new o(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(n,r||[])).next())})},x=function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},j=(ServerSentEventsTransport.prototype.connect=function(s,a){return L(this,void 0,void 0,function(){var e,i=this;return x(this,function(t){switch(t.label){case 0:return v.a.isRequired(s,"url"),v.a.isRequired(a,"transferFormat"),v.a.isIn(a,B,"transferFormat"),this.logger.log(b.a.Trace,"(SSE transport) Connecting."),this.url=s,this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(e=t.sent())&&(s+=(s.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(e)),t.label=2;case 2:return[2,new Promise(function(t,n){var r=!1;if(a===B.Text){var e;if(v.c.isBrowser||v.c.isWebWorker)e=new i.eventSourceConstructor(s,{withCredentials:!0});else{var o=i.httpClient.getCookieString(s);e=new i.eventSourceConstructor(s,{withCredentials:!0,headers:{Cookie:o}})}try{e.onmessage=function(t){if(i.onreceive)try{i.logger.log(b.a.Trace,"(SSE transport) data received. "+Object(v.f)(t.data,i.logMessageContent)+"."),i.onreceive(t.data)}catch(t){return void i.close(t)}},e.onerror=function(t){var e=new Error(t.data||"Error occurred");r?i.close(e):n(e)},e.onopen=function(){i.logger.log(b.a.Information,"SSE connected to "+i.url),i.eventSource=e,r=!0,t()}}catch(t){return void n(t)}}else n(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})]}})})},ServerSentEventsTransport.prototype.send=function(e){return L(this,void 0,void 0,function(){return x(this,function(t){return this.eventSource?[2,Object(v.h)(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},ServerSentEventsTransport.prototype.stop=function(){return this.close(),Promise.resolve()},ServerSentEventsTransport.prototype.close=function(t){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0,this.onclose&&this.onclose(t))},ServerSentEventsTransport);function ServerSentEventsTransport(t,e,n,r,o){this.httpClient=t,this.accessTokenFactory=e,this.logger=n,this.logMessageContent=r,this.eventSourceConstructor=o,this.onreceive=null,this.onclose=null}var M=function(n,r,o,i){return new(o=o||Promise)(function(t,e){function fulfilled(t){try{step(i.next(t))}catch(t){e(t)}}function rejected(t){try{step(i.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new o(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(n,r||[])).next())})},U=function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},W=(WebSocketTransport.prototype.connect=function(s,a){return M(this,void 0,void 0,function(){var e,i=this;return U(this,function(t){switch(t.label){case 0:return v.a.isRequired(s,"url"),v.a.isRequired(a,"transferFormat"),v.a.isIn(a,B,"transferFormat"),this.logger.log(b.a.Trace,"(WebSockets transport) Connecting."),this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(e=t.sent())&&(s+=(s.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(e)),t.label=2;case 2:return[2,new Promise(function(e,n){var r;s=s.replace(/^http/,"ws");var t=i.httpClient.getCookieString(s),o=!1;v.c.isNode&&t&&(r=new i.webSocketConstructor(s,void 0,{headers:{Cookie:""+t}})),r=r||new i.webSocketConstructor(s),a===B.Binary&&(r.binaryType="arraybuffer"),r.onopen=function(t){i.logger.log(b.a.Information,"WebSocket connected to "+s+"."),i.webSocket=r,o=!0,e()},r.onerror=function(t){var e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:new Error("There was an error with the transport."),n(e)},r.onmessage=function(t){i.logger.log(b.a.Trace,"(WebSockets transport) data received. "+Object(v.f)(t.data,i.logMessageContent)+"."),i.onreceive&&i.onreceive(t.data)},r.onclose=function(t){if(o)i.close(t);else{var e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:new Error("There was an error with the transport."),n(e)}}})]}})})},WebSocketTransport.prototype.send=function(t){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(b.a.Trace,"(WebSockets transport) sending data. "+Object(v.f)(t,this.logMessageContent)+"."),this.webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},WebSocketTransport.prototype.stop=function(){return this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=void 0,this.close(void 0)),Promise.resolve()},WebSocketTransport.prototype.close=function(t){this.logger.log(b.a.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!t||!1!==t.wasClean&&1e3===t.code?this.onclose():this.onclose(new Error("WebSocket closed with status code: "+t.code+" ("+t.reason+").")))},WebSocketTransport);function WebSocketTransport(t,e,n,r,o){this.logger=n,this.accessTokenFactory=e,this.logMessageContent=r,this.webSocketConstructor=o,this.httpClient=t,this.onreceive=null,this.onclose=null}var N=function(n,r,o,i){return new(o=o||Promise)(function(t,e){function fulfilled(t){try{step(i.next(t))}catch(t){e(t)}}function rejected(t){try{step(i.throw(t))}catch(t){e(t)}}function step(e){e.done?t(e.value):new o(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(n,r||[])).next())})},q=function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function verb(e){return function(t){return function step(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},F=null,Y=null;if(v.c.isNode){var J=require;F=J("ws"),Y=J("eventsource")}var z=(HttpConnection.prototype.start=function(n){return N(this,void 0,void 0,function(){var e;return q(this,function(t){switch(t.label){case 0:return n=n||B.Binary,v.a.isIn(n,B,"transferFormat"),this.logger.log(b.a.Debug,"Starting connection with transfer format '"+B[n]+"'."),"Disconnected"!==this.connectionState?[2,Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."))]:(this.connectionState="Connecting ",this.startInternalPromise=this.startInternal(n),[4,this.startInternalPromise]);case 1:return t.sent(),"Disconnecting"!==this.connectionState?[3,3]:(e="Failed to start the HttpConnection before stop() was called.",this.logger.log(b.a.Error,e),[4,this.stopPromise]);case 2:return t.sent(),[2,Promise.reject(new Error(e))];case 3:if("Connected"!==this.connectionState)return e="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!",this.logger.log(b.a.Error,e),[2,Promise.reject(new Error(e))];t.label=4;case 4:return this.connectionStarted=!0,[2]}})})},HttpConnection.prototype.send=function(t){return"Connected"!==this.connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this.sendQueue||(this.sendQueue=new X(this.transport)),this.sendQueue.send(t))},HttpConnection.prototype.stop=function(n){return N(this,void 0,void 0,function(){var e=this;return q(this,function(t){switch(t.label){case 0:return"Disconnected"===this.connectionState?(this.logger.log(b.a.Debug,"Call to HttpConnection.stop("+n+") ignored because the connection is already in the disconnected state."),[2,Promise.resolve()]):"Disconnecting"===this.connectionState?(this.logger.log(b.a.Debug,"Call to HttpConnection.stop("+n+") ignored because the connection is already in the disconnecting state."),[2,this.stopPromise]):(this.connectionState="Disconnecting",this.stopPromise=new Promise(function(t){e.stopPromiseResolver=t}),[4,this.stopInternal(n)]);case 1:return t.sent(),[4,this.stopPromise];case 2:return t.sent(),[2]}})})},HttpConnection.prototype.stopInternal=function(r){return N(this,void 0,void 0,function(){var e,n;return q(this,function(t){switch(t.label){case 0:this.stopError=r,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startInternalPromise];case 2:case 3:return t.sent(),[3,4];case 4:if(!this.sendQueue)return[3,9];t.label=5;case 5:return t.trys.push([5,7,,8]),[4,this.sendQueue.stop()];case 6:return t.sent(),[3,8];case 7:return e=t.sent(),this.logger.log(b.a.Error,"TransportSendQueue.stop() threw error '"+e+"'."),[3,8];case 8:this.sendQueue=void 0,t.label=9;case 9:if(!this.transport)return[3,14];t.label=10;case 10:return t.trys.push([10,12,,13]),[4,this.transport.stop()];case 11:return t.sent(),[3,13];case 12:return n=t.sent(),this.logger.log(b.a.Error,"HttpConnection.transport.stop() threw error '"+n+"'."),this.stopConnection(),[3,13];case 13:return this.transport=void 0,[3,15];case 14:this.logger.log(b.a.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed."),this.stopConnection(),t.label=15;case 15:return[2]}})})},HttpConnection.prototype.startInternal=function(a){return N(this,void 0,void 0,function(){var n,r,o,e,i,s;return q(this,function(t){switch(t.label){case 0:n=this.baseUrl,this.accessTokenFactory=this.options.accessTokenFactory,t.label=1;case 1:return t.trys.push([1,12,,13]),this.options.skipNegotiation?this.options.transport!==T.WebSockets?[3,3]:(this.transport=this.constructTransport(T.WebSockets),[4,this.startTransport(n,a)]):[3,5];case 2:return t.sent(),[3,4];case 3:throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:r=null,o=0,e=function(){var e;return q(this,function(t){switch(t.label){case 0:return[4,i.getNegotiationResponse(n)];case 1:if(r=t.sent(),"Disconnecting"===i.connectionState||"Disconnected"===i.connectionState)throw new Error("The connection was stopped during negotiation.");if(r.error)throw new Error(r.error);if(r.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return r.url&&(n=r.url),r.accessToken&&(e=r.accessToken,i.accessTokenFactory=function(){return e}),o++,[2]}})},i=this,t.label=6;case 6:return[5,e()];case 7:t.sent(),t.label=8;case 8:if(r.url&&o<100)return[3,6];t.label=9;case 9:if(100===o&&r.url)throw new Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(n,this.options.transport,r,a)];case 10:t.sent(),t.label=11;case 11:return this.transport instanceof O&&(this.features.inherentKeepAlive=!0),"Connecting "===this.connectionState&&(this.logger.log(b.a.Debug,"The HttpConnection connected successfully."),this.connectionState="Connected"),[3,13];case 12:return s=t.sent(),this.logger.log(b.a.Error,"Failed to start the connection: "+s),this.connectionState="Disconnected",this.transport=void 0,[2,Promise.reject(s)];case 13:return[2]}})})},HttpConnection.prototype.getNegotiationResponse=function(c){return N(this,void 0,void 0,function(){var e,n,r,o,i,s,a;return q(this,function(t){switch(t.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(r=t.sent())&&((e={}).Authorization="Bearer "+r,n=e),t.label=2;case 2:o=this.resolveNegotiateUrl(c),this.logger.log(b.a.Debug,"Sending negotiation request: "+o+"."),t.label=3;case 3:return t.trys.push([3,5,,6]),[4,this.httpClient.post(o,{content:"",headers:n})];case 4:return 200!==(i=t.sent()).statusCode?[2,Promise.reject(new Error("Unexpected status code returned from negotiate "+i.statusCode))]:((!(s=JSON.parse(i.content)).negotiateVersion||s.negotiateVersion<1)&&(s.connectionToken=s.connectionId),[2,s]);case 5:return a=t.sent(),this.logger.log(b.a.Error,"Failed to complete negotiation with the server: "+a),[2,Promise.reject(a)];case 6:return[2]}})})},HttpConnection.prototype.createConnectUrl=function(t,e){return e?t+(-1===t.indexOf("?")?"?":"&")+"id="+e:t},HttpConnection.prototype.createTransport=function(h,p,g,d){return N(this,void 0,void 0,function(){var e,n,r,o,i,s,a,c,u,l,f;return q(this,function(t){switch(t.label){case 0:return e=this.createConnectUrl(h,g.connectionToken),this.isITransport(p)?(this.logger.log(b.a.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=p,[4,this.startTransport(e,d)]):[3,2];case 1:return t.sent(),this.connectionId=g.connectionId,[2];case 2:n=[],r=g.availableTransports||[],o=g,i=0,s=r,t.label=3;case 3:return i<s.length?(a=s[i],(c=this.resolveTransportOrError(a,p,d))instanceof Error?(n.push(a.transport+" failed: "+c),[3,12]):[3,4]):[3,13];case 4:if(!this.isITransport(c))return[3,12];if(this.transport=c,o)return[3,9];t.label=5;case 5:return t.trys.push([5,7,,8]),[4,this.getNegotiationResponse(h)];case 6:return o=t.sent(),[3,8];case 7:return u=t.sent(),[2,Promise.reject(u)];case 8:e=this.createConnectUrl(h,o.connectionToken),t.label=9;case 9:return t.trys.push([9,11,,12]),[4,this.startTransport(e,d)];case 10:return t.sent(),this.connectionId=o.connectionId,[2];case 11:return l=t.sent(),this.logger.log(b.a.Error,"Failed to start the transport '"+a.transport+"': "+l),o=void 0,n.push(a.transport+" failed: "+l),"Connecting "!==this.connectionState?(f="Failed to select transport before stop() was called.",this.logger.log(b.a.Debug,f),[2,Promise.reject(new Error(f))]):[3,12];case 12:return i++,[3,3];case 13:return 0<n.length?[2,Promise.reject(new Error("Unable to connect to the server with any of the available transports. "+n.join(" ")))]:[2,Promise.reject(new Error("None of the transports supported by the client are supported by the server."))]}})})},HttpConnection.prototype.constructTransport=function(t){switch(t){case T.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new W(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket);case T.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new j(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource);case T.LongPolling:return new O(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1);default:throw new Error("Unknown transport: "+t+".")}},HttpConnection.prototype.startTransport=function(t,e){var n=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=function(t){return n.stopConnection(t)},this.transport.connect(t,e)},HttpConnection.prototype.resolveTransportOrError=function(t,e,n){var r=T[t.transport];if(null==r)return this.logger.log(b.a.Debug,"Skipping transport '"+t.transport+"' because it is not supported by this client."),new Error("Skipping transport '"+t.transport+"' because it is not supported by this client.");if(!function transportMatches(t,e){return!t||0!=(e&t)}(e,r))return this.logger.log(b.a.Debug,"Skipping transport '"+T[r]+"' because it was disabled by the client."),new Error("'"+T[r]+"' is disabled by the client.");if(!(0<=t.transferFormats.map(function(t){return B[t]}).indexOf(n)))return this.logger.log(b.a.Debug,"Skipping transport '"+T[r]+"' because it does not support the requested transfer format '"+B[n]+"'."),new Error("'"+T[r]+"' does not support "+B[n]+".");if(r===T.WebSockets&&!this.options.WebSocket||r===T.ServerSentEvents&&!this.options.EventSource)return this.logger.log(b.a.Debug,"Skipping transport '"+T[r]+"' because it is not supported in your environment.'"),new Error("'"+T[r]+"' is not supported in your environment.");this.logger.log(b.a.Debug,"Selecting transport '"+T[r]+"'.");try{return this.constructTransport(r)}catch(t){return t}},HttpConnection.prototype.isITransport=function(t){return t&&"object"==typeof t&&"connect"in t},HttpConnection.prototype.stopConnection=function(e){if(this.logger.log(b.a.Debug,"HttpConnection.stopConnection("+e+") called while in state "+this.connectionState+"."),this.transport=void 0,e=this.stopError||e,this.stopError=void 0,"Disconnected"!==this.connectionState)if("Connecting "!==this.connectionState){if("Disconnecting"===this.connectionState&&this.stopPromiseResolver(),e?this.logger.log(b.a.Error,"Connection disconnected with error '"+e+"'."):this.logger.log(b.a.Information,"Connection disconnected."),this.connectionId=void 0,this.connectionState="Disconnected",this.onclose&&this.connectionStarted){this.connectionStarted=!1;try{this.onclose(e)}catch(t){this.logger.log(b.a.Error,"HttpConnection.onclose("+e+") threw error '"+t+"'.")}}}else this.logger.log(b.a.Warning,"Call to HttpConnection.stopConnection("+e+") was ignored because the connection hasn't yet left the in the connecting state.");else this.logger.log(b.a.Debug,"Call to HttpConnection.stopConnection("+e+") was ignored because the connection is already in the disconnected state.")},HttpConnection.prototype.resolveUrl=function(t){if(0===t.lastIndexOf("https://",0)||0===t.lastIndexOf("http://",0))return t;if(!v.c.isBrowser||!window.document)throw new Error("Cannot resolve '"+t+"'.");var e=window.document.createElement("a");return e.href=t,this.logger.log(b.a.Information,"Normalizing '"+t+"' to '"+e.href+"'."),e.href},HttpConnection.prototype.resolveNegotiateUrl=function(t){var e=t.indexOf("?"),n=t.substring(0,-1===e?t.length:e);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",-1===(n+=-1===e?"":t.substring(e)).indexOf("negotiateVersion")&&(n+=-1===e?"?":"&",n+="negotiateVersion="+this.negotiateVersion),n},HttpConnection);function HttpConnection(t,e){void 0===e&&(e={}),this.features={},this.negotiateVersion=1,v.a.isRequired(t,"url"),this.logger=Object(v.e)(e.logger),this.baseUrl=this.resolveUrl(t),(e=e||{}).logMessageContent=e.logMessageContent||!1,v.c.isNode||"undefined"==typeof WebSocket||e.WebSocket?v.c.isNode&&!e.WebSocket&&F&&(e.WebSocket=F):e.WebSocket=WebSocket,v.c.isNode||"undefined"==typeof EventSource||e.EventSource?v.c.isNode&&!e.EventSource&&void 0!==Y&&(e.EventSource=Y):e.EventSource=EventSource,this.httpClient=e.httpClient||new p(this.logger),this.connectionState="Disconnected",this.connectionStarted=!1,this.options=e,this.onreceive=null,this.onclose=null}var X=(TransportSendQueue.prototype.send=function(t){return this.bufferData(t),this.transportResult||(this.transportResult=new Q),this.transportResult.promise},TransportSendQueue.prototype.stop=function(){return this.executing=!1,this.sendBufferedData.resolve(),this.sendLoopPromise},TransportSendQueue.prototype.bufferData=function(t){if(this.buffer.length&&typeof this.buffer[0]!=typeof t)throw new Error("Expected data to be of type "+typeof this.buffer+" but was of type "+typeof t);this.buffer.push(t),this.sendBufferedData.resolve()},TransportSendQueue.prototype.sendLoop=function(){return N(this,void 0,void 0,function(){var e,n,r;return q(this,function(t){switch(t.label){case 0:return[4,this.sendBufferedData.promise];case 1:if(t.sent(),!this.executing)return this.transportResult&&this.transportResult.reject("Connection stopped."),[3,6];this.sendBufferedData=new Q,e=this.transportResult,this.transportResult=void 0,n="string"==typeof this.buffer[0]?this.buffer.join(""):TransportSendQueue.concatBuffers(this.buffer),this.buffer.length=0,t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.transport.send(n)];case 3:return t.sent(),e.resolve(),[3,5];case 4:return r=t.sent(),e.reject(r),[3,5];case 5:return[3,0];case 6:return[2]}})})},TransportSendQueue.concatBuffers=function(t){for(var e=t.map(function(t){return t.byteLength}).reduce(function(t,e){return t+e}),n=new Uint8Array(e),r=0,o=0,i=t;o<i.length;o++){var s=i[o];n.set(new Uint8Array(s),r),r+=s.byteLength}return n},TransportSendQueue);function TransportSendQueue(t){this.transport=t,this.buffer=[],this.executing=!0,this.sendBufferedData=new Q,this.transportResult=new Q,this.sendLoopPromise=this.sendLoop()}var Q=(PromiseSource.prototype.resolve=function(){this.resolver()},PromiseSource.prototype.reject=function(t){this.rejecter(t)},PromiseSource);function PromiseSource(){var r=this;this.promise=new Promise(function(t,e){var n;return n=[t,e],r.resolver=n[0],r.rejecter=n[1],n})}var V=n(4),G=n(5),K=(JsonHubProtocol.prototype.parseMessages=function(t,e){if("string"!=typeof t)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];null===e&&(e=V.a.instance);for(var n=[],r=0,o=G.a.parse(t);r<o.length;r++){var i=o[r],s=JSON.parse(i);if("number"!=typeof s.type)throw new Error("Invalid payload.");switch(s.type){case g.Invocation:this.isInvocationMessage(s);break;case g.StreamItem:this.isStreamItemMessage(s);break;case g.Completion:this.isCompletionMessage(s);break;case g.Ping:case g.Close:break;default:e.log(b.a.Information,"Unknown message type '"+s.type+"' ignored.");continue}n.push(s)}return n},JsonHubProtocol.prototype.writeMessage=function(t){return G.a.write(JSON.stringify(t))},JsonHubProtocol.prototype.isInvocationMessage=function(t){this.assertNotEmptyString(t.target,"Invalid payload for Invocation message."),void 0!==t.invocationId&&this.assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")},JsonHubProtocol.prototype.isStreamItemMessage=function(t){if(this.assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),void 0===t.item)throw new Error("Invalid payload for StreamItem message.")},JsonHubProtocol.prototype.isCompletionMessage=function(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this.assertNotEmptyString(t.error,"Invalid payload for Completion message."),this.assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")},JsonHubProtocol.prototype.assertNotEmptyString=function(t,e){if("string"!=typeof t||""===t)throw new Error(e)},JsonHubProtocol);function JsonHubProtocol(){this.name="json",this.version=1,this.transferFormat=B.Text}var Z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},$={trace:b.a.Trace,debug:b.a.Debug,info:b.a.Information,information:b.a.Information,warn:b.a.Warning,warning:b.a.Warning,error:b.a.Error,critical:b.a.Critical,none:b.a.None};var tt=(HubConnectionBuilder.prototype.configureLogging=function(t){if(v.a.isRequired(t,"logging"),function isLogger(t){return void 0!==t.log}(t))this.logger=t;else if("string"==typeof t){var e=function parseLogLevel(t){var e=$[t.toLowerCase()];if(void 0!==e)return e;throw new Error("Unknown log level: "+t)}(t);this.logger=new v.b(e)}else this.logger=new v.b(t);return this},HubConnectionBuilder.prototype.withUrl=function(t,e){return v.a.isRequired(t,"url"),this.url=t,this.httpConnectionOptions=Z({},this.httpConnectionOptions,"object"==typeof e?e:{transport:e}),this},HubConnectionBuilder.prototype.withHubProtocol=function(t){return v.a.isRequired(t,"protocol"),this.protocol=t,this},HubConnectionBuilder.prototype.withAutomaticReconnect=function(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new H(t):this.reconnectPolicy=t:this.reconnectPolicy=new H,this},HubConnectionBuilder.prototype.build=function(){var t=this.httpConnectionOptions||{};if(void 0===t.logger&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var e=new z(this.url,t);return k.create(e,this.logger||V.a.instance,this.protocol||new K,this.reconnectPolicy)},HubConnectionBuilder);function HubConnectionBuilder(){}n.d(e,"VERSION",function(){return et}),n.d(e,"AbortError",function(){return a.a}),n.d(e,"HttpError",function(){return a.b}),n.d(e,"TimeoutError",function(){return a.c}),n.d(e,"HttpClient",function(){return s.a}),n.d(e,"HttpResponse",function(){return s.b}),n.d(e,"DefaultHttpClient",function(){return p}),n.d(e,"HubConnection",function(){return k}),n.d(e,"HubConnectionState",function(){return m}),n.d(e,"HubConnectionBuilder",function(){return tt}),n.d(e,"MessageType",function(){return g}),n.d(e,"LogLevel",function(){return b.a}),n.d(e,"HttpTransportType",function(){return T}),n.d(e,"TransferFormat",function(){return B}),n.d(e,"NullLogger",function(){return V.a}),n.d(e,"JsonHubProtocol",function(){return K}),n.d(e,"Subject",function(){return w});var et="3.1.0"}]);
//# sourceMappingURL=main.f6f9e62c65075d7cee38.js.map